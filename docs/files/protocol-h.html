<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>/data/data/com.termux/files/home/mud/vitalia-reborn/src/protocol.h</title><link rel="stylesheet" type="text/css" href="../styles/main.css"><script language=JavaScript src="../javascript/main.js"></script><script language=JavaScript src="../javascript/prettify.js"></script></head><body class="FramedContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="protocol.h"></a>protocol.h</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#protocol.h" >protocol.h</a></td><td class=SDescription></td></tr><tr class="SGroup"><td class=SEntry><a href="#Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#ProtocolCreate" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">ProtocolCreate</a></td><td class=SDescription>Creates, initialises and returns a structure containing protocol data for a single user. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#ProtocolDestroy" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">ProtocolDestroy</a></td><td class=SDescription>Frees the memory allocated by the specified structure. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#ProtocolNegotiate" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">ProtocolNegotiate</a></td><td class=SDescription>Negatiates with the client to see which protocols the user supports, and stores the results in the user&rsquo;s protocol structure. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#ProtocolInput" >ProtocolInput</a></td><td class=SDescription>Extracts any negotiation sequences from the input buffer, and passes back whatever is left for the mud to parse normally. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#ProtocolOutput" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">ProtocolOutput</a></td><td class=SDescription>This function takes a string, applies colour codes to it, and returns the result. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#CopyoverGet" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">CopyoverGet</a></td><td class=SDescription>Returns the protocol values stored as a short string. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#CopyoverSet" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">CopyoverSet</a></td><td class=SDescription>Call this function for each player after a copyover, passing in the string you added to the temporary text file. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#MSDPUpdate" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">MSDPUpdate</a></td><td class=SDescription>Call this regularly (I&rsquo;d suggest at least once per second) to flush every dirty MSDP variable that has been requested by the client via REPORT. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#MSDPFlush" id=link8 onMouseOver="ShowTip(event, 'tt8', 'link8')" onMouseOut="HideTip('tt8')">MSDPFlush</a></td><td class=SDescription>Works like MSDPUpdate(), except only flushes a specific variable. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#MSDPSend" id=link9 onMouseOver="ShowTip(event, 'tt9', 'link9')" onMouseOut="HideTip('tt9')">MSDPSend</a></td><td class=SDescription>Send the specified MSDP variable to the player. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#MSDPSendPair" id=link10 onMouseOver="ShowTip(event, 'tt10', 'link10')" onMouseOut="HideTip('tt10')">MSDPSendPair</a></td><td class=SDescription>Send the specified strings to the user as an MSDP variable/value pair. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#MSDPSendList" id=link11 onMouseOver="ShowTip(event, 'tt11', 'link11')" onMouseOut="HideTip('tt11')">MSDPSendList</a></td><td class=SDescription>Works like MSDPSendPair, but the value is sent as an MSDP array.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#MSDPSetNumber" id=link12 onMouseOver="ShowTip(event, 'tt12', 'link12')" onMouseOut="HideTip('tt12')">MSDPSetNumber</a></td><td class=SDescription>Call this whenever an MSDP integer variable has changed. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#MSDPSetString" id=link13 onMouseOver="ShowTip(event, 'tt13', 'link13')" onMouseOut="HideTip('tt13')">MSDPSetString</a></td><td class=SDescription>Call this whenever an MSDP string variable has changed. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#MSDPSetTable" id=link14 onMouseOver="ShowTip(event, 'tt14', 'link14')" onMouseOut="HideTip('tt14')">MSDPSetTable</a></td><td class=SDescription>Works like MSDPSetString, but the value is sent as an MSDP table.</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#MSDPSetArray" id=link15 onMouseOver="ShowTip(event, 'tt15', 'link15')" onMouseOut="HideTip('tt15')">MSDPSetArray</a></td><td class=SDescription>Works like MSDPSetString, but the value is sent as an MSDP array.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#MSSPSetPlayers" id=link16 onMouseOver="ShowTip(event, 'tt16', 'link16')" onMouseOut="HideTip('tt16')">MSSPSetPlayers</a></td><td class=SDescription>Stores the current number of players. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#MXPCreateTag" id=link17 onMouseOver="ShowTip(event, 'tt17', 'link17')" onMouseOut="HideTip('tt17')">MXPCreateTag</a></td><td class=SDescription>Puts the specified tag into a secure line, if MXP is supported. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#MXPSendTag" id=link18 onMouseOver="ShowTip(event, 'tt18', 'link18')" onMouseOut="HideTip('tt18')">MXPSendTag</a></td><td class=SDescription>This works like MXPCreateTag, but instead of returning the string it sends it directly to the user. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#SoundSend" id=link19 onMouseOver="ShowTip(event, 'tt19', 'link19')" onMouseOut="HideTip('tt19')">SoundSend</a></td><td class=SDescription>Sends the specified sound trigger to the player, using MSDP or ATCP if supported, MSP if not. </td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#ColourRGB" id=link20 onMouseOver="ShowTip(event, 'tt20', 'link20')" onMouseOut="HideTip('tt20')">ColourRGB</a></td><td class=SDescription>Returns a colour as an escape code, based on the RGB value provided. </td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#UnicodeGet" id=link21 onMouseOver="ShowTip(event, 'tt21', 'link21')" onMouseOut="HideTip('tt21')">UnicodeGet</a></td><td class=SDescription>Returns the UTF-8 sequence for the specified unicode value.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#UnicodeAdd" id=link22 onMouseOver="ShowTip(event, 'tt22', 'link22')" onMouseOut="HideTip('tt22')">UnicodeAdd</a></td><td class=SDescription>Adds the UTF-8 sequence for the specified unicode value onto the end of the string, without adding a NUL character at the end.</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="ProtocolCreate"></a>ProtocolCreate</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>protocol_t *ProtocolCreate(</td><td class="PParameter  prettyprint " nowrap>void</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Creates, initialises and returns a structure containing protocol data for a single user.&nbsp;  This should be called when the descriptor is initialised.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="ProtocolDestroy"></a>ProtocolDestroy</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void ProtocolDestroy(</td><td class="PType  prettyprint " nowrap>protocol_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apProtocol</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Frees the memory allocated by the specified structure.&nbsp;  This should be called just before a descriptor is freed.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="ProtocolNegotiate"></a>ProtocolNegotiate</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void ProtocolNegotiate(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Negatiates with the client to see which protocols the user supports, and stores the results in the user&rsquo;s protocol structure.&nbsp;  Call this when you wish to perform negotiation (but only call it once).&nbsp;  It is usually called either immediately after the user has connected, or just after they have entered the game.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="ProtocolInput"></a>ProtocolInput</h3><div class=CBody><p>Extracts any negotiation sequences from the input buffer, and passes back whatever is left for the mud to parse normally.&nbsp;  Call this after data has been read into the input buffer, before it is used for anything else.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="ProtocolOutput"></a>ProtocolOutput</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>const char *ProtocolOutput(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apData,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apLength</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>This function takes a string, applies colour codes to it, and returns the result.&nbsp;  It should be called just before writing to the output buffer.</p><p>The special character used to indicate the start of a colour sequence is &lsquo;\t&rsquo; (i.e., a tab, or ASCII character 9).&nbsp;  This makes it easy to include in help files (as you can literally press the tab key) as well as strings (where you can use \t instead).&nbsp;  However players can&rsquo;t send tabs (on most muds at least), so this stops them from sending colour codes to each other.</p><h4 class=CHeading>The predefined colours are</h4><p>n: no colour (switches colour off) r: dark red                        R: bright red g: dark green                      G: bright green b: dark blue                       B: bright blue y: dark yellow                     Y: bright yellow m: dark magenta                    M: bright magenta c: dark cyan                       C: bright cyan w: dark white                      W: bright white o: dark orange                     O: bright orange</p><p>So for example &ldquo;This is \tOorange\tn.&rdquo; will colour the word &ldquo;orange&rdquo;.&nbsp;  You can add more colours yourself just by updating the switch statement.</p><p>It&rsquo;s also possible to explicitly specify an RGB value, by including the four character colour sequence (as used by ColourRGB) within square brackets, eg:</p><p>This is a \t[F010]very dark green foreground\tn.</p><h4 class=CHeading>The square brackets can also be used to send unicode characters, like this</h4><p>Boat: \t[U9973/B] Rook: \t[U9814/C]</p><p>For example you might use &lsquo;B&rsquo; to represent a boat on your ASCII map, or a &lsquo;C&rsquo; to represent a castle - but players with UTF-8 support would actually see the appropriate unicode characters for a boat or a rook (the chess playing piece).</p><p>The exact syntax is &lsquo;\t&rsquo; (tab), &lsquo;[&lsquo;, &lsquo;U&rsquo; (indicating unicode), then the decimal number of the unicode character <img mode="link" target="url target=&rdquo;http://www.unicode.org/charts&rdquo; name=&rdquo;http://www.unicode.org/charts&rdquo;>&rdquo; original=&rdquo;(see <url target=&rdquo;http://www.unicode.org/charts&rdquo; name=&rdquo;http://www.unicode.org/charts&rdquo;>)&rdquo;, then &lsquo;/&rsquo; followed by the ASCII character/s that should be used if the client doesn&rsquo;t support UTF-8.&nbsp;  The ASCII sequence can be up to 7 characters in length, but in most cases you&rsquo;ll only want it to be one or two characters (so that it has the same alignment as the unicode character).</p><p>Finally, this function also allows you to embed MXP tags.&nbsp;  The easiest and safest way to do this is via the ( and ) bracket options:</p><p>From here, you can walk \t(north\t).</p><h4 class=CHeading>However it&rsquo;s also possible to include more explicit MSP tags, like this</h4><p>The baker offers to sell you a \t&lt;send href=&rdquo;buy pie&rdquo;&gt;pie\t&lt;/send&gt;.</p><p>Note that the MXP tags will automatically be removed if the user doesn&rsquo;t support MXP, but it&rsquo;s very important you remember to close the tags.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CopyoverGet"></a>CopyoverGet</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>const char *CopyoverGet(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns the protocol values stored as a short string.&nbsp;  If your mud uses copyover, you should call this for each player and insert it after their name in the temporary text file.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="CopyoverSet"></a>CopyoverSet</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void CopyoverSet(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apData</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Call this function for each player after a copyover, passing in the string you added to the temporary text file.&nbsp;  This will restore their protocol settings, and automatically renegotiate MSDP/ATCP.</p><p>Note that the client doesn&rsquo;t recognise a copyover, and therefore refuses to renegotiate certain telnet options (to avoid loops), so they really need to be saved.&nbsp;  However MSDP/ATCP is handled through scripts, and we don&rsquo;t want to have to save all of the REPORT variables, so it&rsquo;s easier to renegotiate.</p><p>Client name and version are not saved.&nbsp;  It is recommended you save these in the player file, as then you can grep to collect client usage stats.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPUpdate"></a>MSDPUpdate</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPUpdate(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Call this regularly (I&rsquo;d suggest at least once per second) to flush every dirty MSDP variable that has been requested by the client via REPORT.&nbsp;  This will automatically use ATCP instead if MSDP is not supported by the client.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPFlush"></a>MSDPFlush</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPFlush(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Works like MSDPUpdate(), except only flushes a specific variable.&nbsp;  The variable will only actually be sent if it&rsquo;s both reported and dirty.</p><p>Call this function after setting a variable if you want it to be reported immediately, instead of on the next update.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPSend"></a>MSDPSend</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSend(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Send the specified MSDP variable to the player.&nbsp;  You shouldn&rsquo;t ever really need to do this manually, except perhaps when debugging something.&nbsp;  This will automatically use ATCP instead if MSDP is not supported by the client.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPSendPair"></a>MSDPSendPair</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSendPair(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apVariable,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Send the specified strings to the user as an MSDP variable/value pair.&nbsp;  This will automatically use ATCP instead if MSDP is not supported by the client.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPSendList"></a>MSDPSendList</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSendList(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apVariable,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Works like MSDPSendPair, but the value is sent as an MSDP array.</p><p>apValue should be a list of values separated by spaces.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPSetNumber"></a>MSDPSetNumber</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSetNumber(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Call this whenever an MSDP integer variable has changed.&nbsp;  The easiest approach is to send every MSDP variable within an update function (and this is what the snippet does by default), but if the variable is only set in one place you can just move its MDSPSend() call to there.</p><p>You can also this function for bools, chars, enums, short ints, etc.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPSetString"></a>MSDPSetString</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSetString(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Call this whenever an MSDP string variable has changed.&nbsp;  The easiest approach is to send every MSDP variable within an update function (and this is what the snippet does by default), but if the variable is only set in one place you can just move its MDSPSend() call to there.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPSetTable"></a>MSDPSetTable</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSetTable(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Works like MSDPSetString, but the value is sent as an MSDP table.</p><h4 class=CHeading>You must add the MSDP_VAR and MSDP_VAL manually, for example</h4><p>sprintf( Buffer, &ldquo;%c%s%c%s&rdquo;, (char)MSDP_VAR, Name, (char)MSDP_VAL, Value ); MSDPSetTable( d, eMSDP_TEST, Buffer );</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSDPSetArray"></a>MSDPSetArray</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSetArray(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Works like MSDPSetString, but the value is sent as an MSDP array.</p><h4 class=CHeading>You must add the MSDP_VAR before each element manually, for example</h4><p>sprintf( Buffer, &ldquo;%c%s%c%s&rdquo;, (char)MSDP_VAL, Val1, (char)MSDP_VAL, Val2 ); MSDPSetArray( d, eMSDP_TEST, Buffer );</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MSSPSetPlayers"></a>MSSPSetPlayers</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSSPSetPlayers(</td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameter  prettyprint " nowrap>aPlayers</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Stores the current number of players.&nbsp;  The first time it&rsquo;s called, it also stores the uptime.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MXPCreateTag"></a>MXPCreateTag</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>const char *MXPCreateTag(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apTag</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Puts the specified tag into a secure line, if MXP is supported.&nbsp;  If the user doesn&rsquo;t support MXP they will see the string unchanged, meaning they will see the &lt;send&gt; tags or whatever.&nbsp;  You should therefore check for support and provide a different sequence for other users, or better yet just embed MXP tags for the ProtocolOutput() function.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="MXPSendTag"></a>MXPSendTag</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MXPSendTag(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apTag</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>This works like MXPCreateTag, but instead of returning the string it sends it directly to the user.&nbsp;  This is mainly useful for the &lt;VERSION&gt; tag.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="SoundSend"></a>SoundSend</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void SoundSend(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apTrigger</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Sends the specified sound trigger to the player, using MSDP or ATCP if supported, MSP if not.&nbsp;  The trigger string itself is a relative path and filename, eg: SoundSend( pDesc, &ldquo;monster/growl.wav&rdquo; );</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="ColourRGB"></a>ColourRGB</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>const char *ColourRGB(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apRGB</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns a colour as an escape code, based on the RGB value provided.&nbsp;  The string must be four characters, where the first is either &lsquo;f&rsquo; for foreground or &lsquo;b&rsquo; for background (case insensitive), and the other three characters are numeric digits in the range 0 to 5, representing red, green and blue.</p><p>For example &ldquo;F500&rdquo; returns a red foreground, &ldquo;B530&rdquo; an orange background, and so on.&nbsp;  An invalid colour will clear whatever you&rsquo;ve set previously.</p><p>If the user doesn&rsquo;t support XTerm 256 colours, this function will return the best-fit ANSI colour instead.</p><p>If you wish to embed colours in strings, use ProtocolOutput().</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="UnicodeGet"></a>UnicodeGet</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>char *UnicodeGet(</td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameter  prettyprint " nowrap>aValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Returns the UTF-8 sequence for the specified unicode value.</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="UnicodeAdd"></a>UnicodeAdd</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void UnicodeAdd(</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>**</td><td class="PParameter  prettyprint " nowrap>apString,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Adds the UTF-8 sequence for the specified unicode value onto the end of the string, without adding a NUL character at the end.</p></div></div></div>

</div><!--Content-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>protocol_t *ProtocolCreate(</td><td class="PParameter  prettyprint " nowrap>void</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Creates, initialises and returns a structure containing protocol data for a single user. </div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void ProtocolDestroy(</td><td class="PType  prettyprint " nowrap>protocol_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apProtocol</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Frees the memory allocated by the specified structure. </div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void ProtocolNegotiate(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Negatiates with the client to see which protocols the user supports, and stores the results in the user&rsquo;s protocol structure. </div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>const char *ProtocolOutput(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apData,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apLength</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>This function takes a string, applies colour codes to it, and returns the result. </div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>const char *CopyoverGet(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the protocol values stored as a short string. </div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void CopyoverSet(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apData</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Call this function for each player after a copyover, passing in the string you added to the temporary text file. </div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPUpdate(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Call this regularly (I&rsquo;d suggest at least once per second) to flush every dirty MSDP variable that has been requested by the client via REPORT. </div></div><div class=CToolTip id="tt8"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPFlush(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Works like MSDPUpdate(), except only flushes a specific variable. </div></div><div class=CToolTip id="tt9"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSend(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Send the specified MSDP variable to the player. </div></div><div class=CToolTip id="tt10"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSendPair(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apVariable,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Send the specified strings to the user as an MSDP variable/value pair. </div></div><div class=CToolTip id="tt11"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSendList(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apVariable,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Works like MSDPSendPair, but the value is sent as an MSDP array.</div></div><div class=CToolTip id="tt12"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSetNumber(</td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Call this whenever an MSDP integer variable has changed. </div></div><div class=CToolTip id="tt13"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSetString(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Call this whenever an MSDP string variable has changed. </div></div><div class=CToolTip id="tt14"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSetTable(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Works like MSDPSetString, but the value is sent as an MSDP table.</div></div><div class=CToolTip id="tt15"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSDPSetArray(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>variable_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aMSDP,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Works like MSDPSetString, but the value is sent as an MSDP array.</div></div><div class=CToolTip id="tt16"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MSSPSetPlayers(</td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameter  prettyprint " nowrap>aPlayers</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Stores the current number of players. </div></div><div class=CToolTip id="tt17"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>const char *MXPCreateTag(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apTag</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Puts the specified tag into a secure line, if MXP is supported. </div></div><div class=CToolTip id="tt18"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void MXPSendTag(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apTag</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>This works like MXPCreateTag, but instead of returning the string it sends it directly to the user. </div></div><div class=CToolTip id="tt19"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void SoundSend(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apTrigger</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Sends the specified sound trigger to the player, using MSDP or ATCP if supported, MSP if not. </div></div><div class=CToolTip id="tt20"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>const char *ColourRGB(</td><td class="PTypePrefix  prettyprint " nowrap></td><td class="PType  prettyprint " nowrap>descriptor_t&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apDescriptor,</td></tr><tr><td></td><td class="PTypePrefix  prettyprint " nowrap>const&nbsp;</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>*</td><td class="PParameter  prettyprint " nowrap>apRGB</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Returns a colour as an escape code, based on the RGB value provided. </div></div><div class=CToolTip id="tt21"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>char *UnicodeGet(</td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameter  prettyprint " nowrap>aValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Returns the UTF-8 sequence for the specified unicode value.</div></div><div class=CToolTip id="tt22"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>void UnicodeAdd(</td><td class="PType  prettyprint " nowrap>char&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap>**</td><td class="PParameter  prettyprint " nowrap>apString,</td></tr><tr><td></td><td class="PType  prettyprint " nowrap>int&nbsp;</td><td class="PParameterPrefix  prettyprint " nowrap></td><td class="PParameter  prettyprint " nowrap>aValue</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Adds the UTF-8 sequence for the specified unicode value onto the end of the string, without adding a NUL character at the end.</div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>